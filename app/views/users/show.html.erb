<% provide(:title, @user.name) %>

<%= render 'shared/record_form' %>

<ul class="list-group list-group-horizontal">
   <li class="list-group-item flex-fill border border-0 text-center"><%= link_to '3days', user_path(@user, duration: "3days") %></li>
   <li class="list-group-item flex-fill border border-0 text-center"><%= link_to '7days', user_path(@user, duration: "week") %></li>
   <li class="list-group-item flex-fill border border-0 text-center"><%= link_to '30days', user_path(@user, duration: "month") %></li>
   <li class="list-group-item flex-fill border border-0 text-center"><%= link_to 'All', user_path(@user, duration: "all") %></li>
</ul>

<canvas id="myChart" width="900" height="400"></canvas>
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels:  <%= raw @graph_date %> ,
        datasets: [{
            label: "weight",
            data: <%= raw @graph_weights %>,
            lineTension: 0,
            backgroundColor: 'rgba(0, 123, 255, 1.0)',
            borderColor: 'rgba(0, 123, 255, 1.0)',
            fill: false,
            pointRadius: 5,
            pointHoverRadius: 7
        }]
    },
    options: {

    }
});
</script>

<table class="table table-striped">
  <thead>
  <tr>
    <th>Date</th>
    <th>Weight</th>
    <th>Action</th>
  </tr>
  </thead>
  <tbody>
  <% @records.each do |record| %>
    <tr>
      <td><%= record.created_at.strftime('%Y-%m-%d %H:%M') %></td>
      <td><%= record.weight %> kg</td>
        <td>
          <a rel="nofollow" data-method="delete" href= <%= "/records/#{record.id}" %>>Delete</a>
        </td>
    </tr>
  <% end %>
  </tbody>
</table>

<div class="pagewarapper">
   <%= paginate @records %>
</div>

<div class="push">

</div>
